<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>모바일 앱 매주 배포하기: 자동화하기 by Jimmy Lee - Soomgo Tech</title><meta name="gridsome:hash" content="c670d5ee025030f952f3448986aec25d458077d1"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.19"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.f2d543711ef5e20a474f3b69d3d41be5.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.f2d543711ef5e20a474f3b69d3d41be5.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.f2d543711ef5e20a474f3b69d3d41be5.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.f2d543711ef5e20a474f3b69d3d41be5.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.f2d543711ef5e20a474f3b69d3d41be5.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.f2d543711ef5e20a474f3b69d3d41be5.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.f2d543711ef5e20a474f3b69d3d41be5.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.f2d543711ef5e20a474f3b69d3d41be5.png"><link rel="preload" href="/assets/css/0.styles.7d01e712.css" as="style"><link rel="preload" href="/assets/js/app.fa1010ad.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.77e0a7ac.js" as="script"><link rel="prefetch" href="/assets/js/8.6a25e241.js"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.c9645e1f.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-vue.64179064.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.455be179.js"><link rel="prefetch" href="/assets/js/page--src--templates--author-vue.60778b21.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.bfe6ca6f.js"><link rel="stylesheet" href="/assets/css/0.styles.7d01e712.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout"><div class="nav"><nav role="navigation" aria-label="main navigation" class="navbar container nav"><div class="navbar-brand"><a href="/" to="[object Object]" class="navbar-item router-link-active"><img src="/assets/img/soomgo.f2d54371.png" alt="Soomgo"></a><a role="button" aria-label="menu" class="navbar-burger burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a></div><div class="navbar-menu"><div class="navbar-start"><a href="/about" to="/about" class="navbar-item">
        About
      </a><a href="https://soomgo.recruitee.com/" class="navbar-item">
        Support
      </a></div><div class="navbar-end"></div></div></nav></div><section class="hero is-medium is-primary"><div class="hero-body"><div class="container"><div class="titles"><h1 class="title is-1">
            모바일 앱 매주 배포하기: 자동화하기
          </h1><h2 class="subtitle">
            Mobile App Deploy
          </h2></div></div></div></section><main><div class="box breadcrumbs"><nav aria-label="breadcrumbs" class="breadcrumb is-centered"><ul><li><a href="/" class="router-link-active">Home</a></li><li class="is-active"><a href="#" aria-current="page">모바일 앱 매주 배포하기: 자동화하기</a></li></ul></nav></div><section class="section"><div class="container"><div class="content"><div><p><img src="https://miro.medium.com/max/1400/0*rc6WXTJcCjBQ72Zn"><br>
<em>Photo by <u><a href="https://unsplash.com/@lennykuhne?utm_source=medium&#x26;utm_medium=referral" target="_blank" rel="nofollow noopener noreferrer">Lenny Kuhne</a></u> on <u><a href="https://unsplash.com/?utm_source=medium&#x26;utm_medium=referral" target="_blank" rel="nofollow noopener noreferrer">Unsplash</a></u></em></p>
<p>안녕하세요. 숨고 모바일 챕터에서 리액트 네이티브 앱 개발을 하는 Jimmy입니다.
숨고에서는 매주 수요일마다 정기적으로 제품을 배포하고 있는데요. 모바일 앱, 웹, 서버 모두 예외는 없습니다. <u><a href="">각기 다른 목표를 가진 여러 스쿼드</a></u>에서 작업한 일감 들이 병합된 뒤 함께 배포되고 있습니다.
<u><a href="">이전 글</a></u>에 이어서 이 글에서는 숨고에서 모바일 앱을 일반 사용자와 내부 테스터에게 배포하는 방법에 대해 소개합니다.</p>
<h1 id="qa를-거쳐-배포하기"><a href="#qa%EB%A5%BC-%EA%B1%B0%EC%B3%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="icon icon-link"></span></a>QA를 거쳐 배포하기</h1>
<p>숨고에서 개발자가 작업한 코드는 두 번의 QA를 통과한 뒤에 배포되고 있습니다. 첫 번째는 스쿼드 내부 QA, 두 번째는 통합 QA 입니다.</p>
<p><strong>MS 앱센터</strong></p>
<p>QA를 진행하기 위해서는 내부 테스터들에게 최신 버전의 앱을 배포해야 합니다. 이를 위한 플랫폼으로는 MS 앱센터를 사용하고 있습니다.</p>
<p><img src="https://miro.medium.com/max/700/1*2ip-wQxJDzx4sVwSnITo-g.png">
<em>MS 앱센터를 통해 내부 테스터에게 앱 전달</em></p>
<p><strong>스쿼드 내부 QA</strong></p>
<p>각 스쿼드에서 작업한 코드는 통합 QA를 받기 전에 스쿼드 내부 QA를 진행합니다. 이 단계에서는 스쿼드 구성원(개발자, 디자이너, PO 등)들이 함께 스쿼드 내에서 진행한 일감이 정상적으로 동작하는지를 확인합니다. 개발자는 앱센터를 통해 스쿼드원들에게 테스트할 버전의 앱을 전달하고, 수정이 필요할 경우 새 버전을 다시 전달하게 됩니다.</p>
<p><img src="https://miro.medium.com/max/700/1*dP-8fu-s3kl5i58yuN2TAA.png"><br>
<em>스쿼드 A에서 내부 QA를 하는 과정. 버전 identifier의 ‘a’는 스쿼드 이름입니다</em></p>
<p><strong>통합 QA</strong></p>
<p>스쿼드 내부 QA가 완료된 코드들은 하나로 병합된 뒤 통합 QA를 진행합니다. 이 단계에서는 QA 챕터에서 코드들을 병합한 뒤에도 사이드 이펙트 없이 각 스쿼드의 작업이 잘 동작 하는지 확인하고, 숨고 서비스의 중요한 기능들이 잘 동작 하는지를 확인합니다.</p>
<p><img src="https://miro.medium.com/max/700/1*nu0rwkU2vS_PRejkm1b4YA.png"><br>
<em>통합 QA를 하는 과정</em></p>
<p><strong>일반 사용자에게 배포</strong></p>
<p>통합 QA가 완료되면 배포 준비가 완료된 것으로, 마켓을 통해 일반 사용자에게 배포하게 됩니다.</p>
<p><img src="https://miro.medium.com/max/700/1*Yjj_-pndKmLWjsXzXeVCOQ.png"><br>
<em>마켓을 통해 일반 사용자에게 앱 전달</em></p>
<h1 id="쉽게-배포하기"><a href="#%EC%89%BD%EA%B2%8C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="icon icon-link"></span></a>쉽게 배포하기</h1>
<p>내부 테스터와 일반 사용자에게 새 버전의 빌드를 배포할 때마다 어딘가에서는 다음 작업들을 진행해야 합니다.</p>
<p><img src="https://miro.medium.com/max/700/1*f-c-wIjP2arI4rnm1hxZnw.png"><br>
<em>숨고에서는 리액트 네이티브를 사용하기때문에 한번에 두가지 앱을 배포하게 됩니다</em></p>
<p>개발자가 직접 이 작업들을 하려면 적게 잡아도 3~40분은 필요할 텐데요, 외부에서 자동으로 수행하게 하면 개발자의 능률을 높이고 잦은 배포도 쉽게 할 수 있습니다.</p>
<p>그래서 우리는 이런 것들로 자동화를 하고 있습니다:</p>
<ul>
<li><strong>버전 변경 스크립트:</strong> 버전을 수정하고, git 태그를 생성하는 스크립트 사용</li>
<li><strong>CircleCI:</strong> 클라우드에서 빌드와 배포를 수행</li>
</ul>
<h1 id="버전-변경-스크립트"><a href="#%EB%B2%84%EC%A0%84-%EB%B3%80%EA%B2%BD-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8" aria-hidden="true"><span class="icon icon-link"></span></a>버전 변경 스크립트</h1>
<p>스크립트로 이런 반복 작업을 처리합니다:</p>
<ul>
<li>Android, iOS 설정 파일, package.json의 버전 이름과 버전 코드를 현재 브랜치와 버전을 기준으로 규칙에 따라 동일하게 수정하기</li>
<li>새 버전으로 git 태그 생성하기</li>
</ul>
<p>스크립트는 package.json에 선언되어있고 이렇게 호출하면 버전 변경이 완료됩니다.</p>
<pre class="language-zsh"><code class="language-zsh">npm run version:bump</code></pre>
<p>Android, iOS 설정 파일은 스크립트 내부에서 <a href="https://github.com/stovmascript/react-native-version" target="_blank" rel="nofollow noopener noreferrer">react-native-version</a>을 이용해서 package 버전을 따라 수정하도록 되어있습니다.</p>
<p>버전을 변경한 뒤 리모트로 푸시하면 CircleCI에서 배포가 시작됩니다.</p>
<h1 id="circleci"><a href="#circleci" aria-hidden="true"><span class="icon icon-link"></span></a>CircleCI</h1>
<p>클라우드에서 자동으로 빌드와 배포를 하기 위해 CircleCI를 사용하고 있고 워크플로우는 두 가지가 설정되어있습니다:</p>
<ul>
<li><strong>pre-release 워크플로우:</strong> 테스트용 빌드를 수행하고 앱센터에 배포</li>
<li><strong>release 워크플로우:</strong> 마켓용 빌드를 수행하고 마켓에 배포</li>
</ul>
<p>워크플로우는 git 태그가 리모트에 푸시되면 시작됩니다. 태그가 release 버전(SEMVER 규칙상)이면 release 워크플로우가, pre-release 버전이면 pre-release 워크플로우가 시작됩니다.</p>
<p><strong>pre-release 워크플로우</strong></p>
<p>pre-release 워크플로우가 시작되면 CircleCI에서 앱센터 코드 푸시를 통해 배포를 시작함과 동시에 슬랙을 통해 개발자에게 네이티브 앱으로도 배포 할지 물어봅니다. 개발자가 승인할 경우 코드 푸시, 네이티브 앱 모두 배포됩니다. 배포 대상은 내부 테스터입니다.</p>
<p><img src="https://miro.medium.com/max/700/1*FJLSjRo5FikTcrg8xXkrtA.png"><br>
<em>흐름</em></p>
<p><img src="https://miro.medium.com/max/700/1*mqKbO0xJuJFcDnoAobHMJQ.png"><br>
<em>발송되는 슬랙 메세지</em></p>
<p><img src="https://miro.medium.com/max/700/1*BcLZLBDY2ft_I5wcSMfIpQ.png"><br>
<em>CircleCI 웹 인터페이스에서는 이런 모습입니다</em></p>
<p><strong>release 워크플로우</strong></p>
<p>release 워크플로우가 시작되면 CircleCI에서 슬랙을 통해 개발자에게 배포할 플랫폼을 물어봅니다. 플랫폼을 선택하면 일반 사용자에게 배포가 이루어집니다.</p>
<p><img src="https://miro.medium.com/max/700/1*frhoF2x9dLVA3eZQsVBIag.png"><br>
<em>흐름</em></p>
<p><img src="https://miro.medium.com/max/700/1*1D3uYODP32f9I8uPY_tB-w.png"><br>
<em>발송되는 슬랙 메세지</em></p>
<p><img src="https://miro.medium.com/max/700/1*rWozYKtfkQXoriY-MptGEA.png"><br>
<em>CircleCI 웹 인터페이스에서는 이런 모습입니다</em></p>
<p>이렇게 숨고에서는 배포 과정을 자동화 함으로써 이런 경험을 할 수 있었습니다.</p>
<ul>
<li>개발자들이 배포를 신경 쓰지 않고 개발에 집중</li>
<li>새로 합류한 개발자도 쉽게 배포</li>
<li>배포에 필요한 반복 작업들을 쉽고 일관되게 처리</li>
</ul>
</div></div></div></section><div class="box author"><figure class="image is-rounded is-128x128"><img src="../../../../../../uploads/author-images/jimmy.png" class="is-rounded"></figure><div class="content"><h2 class="title is-5">
        Posted by <a href="/author/jimmy-lee/">Jimmy Lee</a></h2><p>Soomgo Mobile Engineer</p></div><!----><!----><div class="posts"><div class="next">
        다음 게시글
        <p><a href="/blog/2021/05/20/about-fundamental-of-agile/">
            애자일의 근본 알아보기 by Jimmy Lee</a></p></div><div class="previous">
        이전 게시글
        <p><a href="/blog/2021/04/18/mobile-app-deploy-create-rule/">
            모바일 앱 매주 배포하기: 규칙 정하기 by Jimmy Lee
          </a></p></div></div><!----><!----><!----><!----><!----><!----><!----></div></main><footer class="footer"><div class="content has-text-centered"><p>© 2021 SoomgoTech</p><p>
        Powered by GitHub Pages
      </p></div></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"posts":{"edges":[{"node":{"id":"c0689c02660f1b5b932efcf43e65c49a"},"prev":{"path":"\u002Fblog\u002F2021\u002F05\u002F20\u002Fabout-fundamental-of-agile\u002F","title":"애자일의 근본 알아보기","author":{"title":"Jimmy Lee","path":"\u002Fauthor\u002Fjimmy-lee\u002F"}},"next":null},{"node":{"id":"ae5576a53167114266f6ab8c69cfe19f"},"prev":{"path":"\u002Fblog\u002F2021\u002F04\u002F26\u002Fmobile-app-deploy-automation\u002F","title":"모바일 앱 매주 배포하기: 자동화하기","author":{"title":"Jimmy Lee","path":"\u002Fauthor\u002Fjimmy-lee\u002F"}},"next":{"path":"\u002Fblog\u002F2021\u002F10\u002F12\u002Fdd\u002F","title":"dd","author":{"title":"숨고 Soomgo","path":"\u002Fauthor\u002Fsoomgo\u002F"}}},{"node":{"id":"48ed018164c43aeb8996774e3f8f6c22"},"prev":{"path":"\u002Fblog\u002F2021\u002F04\u002F18\u002Fmobile-app-deploy-create-rule\u002F","title":"모바일 앱 매주 배포하기: 규칙 정하기","author":{"title":"Jimmy Lee","path":"\u002Fauthor\u002Fjimmy-lee\u002F"}},"next":{"path":"\u002Fblog\u002F2021\u002F05\u002F20\u002Fabout-fundamental-of-agile\u002F","title":"애자일의 근본 알아보기","author":{"title":"Jimmy Lee","path":"\u002Fauthor\u002Fjimmy-lee\u002F"}}},{"node":{"id":"29c698b6f384ebf2384dbd2640cf91c2"},"prev":{"path":"\u002Fblog\u002F2021\u002F04\u002F16\u002Fsquad-process-and-product-designer\u002F","title":"[Design] 숨고의 애자일, 스쿼드의 업무 프로세스와 프로덕트 디자이너가 하는 일","author":{"title":"Summer Lee","path":"\u002Fauthor\u002Fsummer-lee\u002F"}},"next":{"path":"\u002Fblog\u002F2021\u002F04\u002F26\u002Fmobile-app-deploy-automation\u002F","title":"모바일 앱 매주 배포하기: 자동화하기","author":{"title":"Jimmy Lee","path":"\u002Fauthor\u002Fjimmy-lee\u002F"}}},{"node":{"id":"beec0a16612692a60906c5d0794787b2"},"prev":{"path":"\u002Fblog\u002F2021\u002F04\u002F07\u002Fwebsite-benchmark-with-lighthouse\u002F","title":"Lighthouse로 웹사이트 성능 측정하기","author":{"title":"Zoey Kang","path":"\u002Fauthor\u002Fzoey-kang\u002F"}},"next":{"path":"\u002Fblog\u002F2021\u002F04\u002F18\u002Fmobile-app-deploy-create-rule\u002F","title":"모바일 앱 매주 배포하기: 규칙 정하기","author":{"title":"Jimmy Lee","path":"\u002Fauthor\u002Fjimmy-lee\u002F"}}},{"node":{"id":"b55c21505707bfeb0c3e200227e80b50"},"prev":{"path":"\u002Fblog\u002F2020\u002F12\u002F18\u002Fimprove-kubernetes-cd\u002F","title":"Kubernetes 환경 CD(Continuous Deployment) 개선하기","author":{"title":"Derek","path":"\u002Fauthor\u002Fderek\u002F"}},"next":{"path":"\u002Fblog\u002F2021\u002F04\u002F16\u002Fsquad-process-and-product-designer\u002F","title":"[Design] 숨고의 애자일, 스쿼드의 업무 프로세스와 프로덕트 디자이너가 하는 일","author":{"title":"Summer Lee","path":"\u002Fauthor\u002Fsummer-lee\u002F"}}},{"node":{"id":"985f56840e2f22845987f529305dfc2f"},"prev":{"path":"\u002Fblog\u002F2020\u002F12\u002F09\u002Fauto-docs-with-swagger-and-redoc\u002F","title":"Swagger와 Redoc을 이용한 API 문서 자동화하기","author":{"title":"Paul Cho","path":"\u002Fauthor\u002Fpaul-cho\u002F"}},"next":{"path":"\u002Fblog\u002F2021\u002F04\u002F07\u002Fwebsite-benchmark-with-lighthouse\u002F","title":"Lighthouse로 웹사이트 성능 측정하기","author":{"title":"Zoey Kang","path":"\u002Fauthor\u002Fzoey-kang\u002F"}}},{"node":{"id":"dda2ca28bab0299deec8a89a846e6d48"},"prev":{"path":"\u002Fblog\u002F2020\u002F11\u002F02\u002Fsoomgo-msa-architecture-soomgo-py\u002F","title":"숨고의 MSA Architecture를 위한 프레임워크 Soomgo-py","author":{"title":"Paul Cho","path":"\u002Fauthor\u002Fpaul-cho\u002F"}},"next":{"path":"\u002Fblog\u002F2020\u002F12\u002F18\u002Fimprove-kubernetes-cd\u002F","title":"Kubernetes 환경 CD(Continuous Deployment) 개선하기","author":{"title":"Derek","path":"\u002Fauthor\u002Fderek\u002F"}}},{"node":{"id":"d7c5f4fc0af185befef675bf903b0cc7"},"prev":{"path":"\u002Fblog\u002F2020\u002F09\u002F29\u002Fhttp2-for-all\u002F","title":"모두를 위한 Http2","author":{"title":"Kei Jeon","path":"\u002Fauthor\u002Fkei-jeon\u002F"}},"next":{"path":"\u002Fblog\u002F2020\u002F12\u002F09\u002Fauto-docs-with-swagger-and-redoc\u002F","title":"Swagger와 Redoc을 이용한 API 문서 자동화하기","author":{"title":"Paul Cho","path":"\u002Fauthor\u002Fpaul-cho\u002F"}}},{"node":{"id":"bb8fc898b05cf4e28cc2cb9252d551dc"},"prev":null,"next":{"path":"\u002Fblog\u002F2020\u002F11\u002F02\u002Fsoomgo-msa-architecture-soomgo-py\u002F","title":"숨고의 MSA Architecture를 위한 프레임워크 Soomgo-py","author":{"title":"Paul Cho","path":"\u002Fauthor\u002Fpaul-cho\u002F"}}}]},"post":{"id":"48ed018164c43aeb8996774e3f8f6c22","title":"모바일 앱 매주 배포하기: 자동화하기","excerpt":"Mobile App Deploy","featuredImage":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1400\u002F0*rc6WXTJcCjBQ72Zn","content":"\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1400\u002F0*rc6WXTJcCjBQ72Zn\"\u003E\u003Cbr\u003E\n\u003Cem\u003EPhoto by \u003Cu\u003E\u003Ca href=\"https:\u002F\u002Funsplash.com\u002F@lennykuhne?utm_source=medium&#x26;utm_medium=referral\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ELenny Kuhne\u003C\u002Fa\u003E\u003C\u002Fu\u003E on \u003Cu\u003E\u003Ca href=\"https:\u002F\u002Funsplash.com\u002F?utm_source=medium&#x26;utm_medium=referral\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EUnsplash\u003C\u002Fa\u003E\u003C\u002Fu\u003E\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E안녕하세요. 숨고 모바일 챕터에서 리액트 네이티브 앱 개발을 하는 Jimmy입니다.\n숨고에서는 매주 수요일마다 정기적으로 제품을 배포하고 있는데요. 모바일 앱, 웹, 서버 모두 예외는 없습니다. \u003Cu\u003E\u003Ca href=\"\"\u003E각기 다른 목표를 가진 여러 스쿼드\u003C\u002Fa\u003E\u003C\u002Fu\u003E에서 작업한 일감 들이 병합된 뒤 함께 배포되고 있습니다.\n\u003Cu\u003E\u003Ca href=\"\"\u003E이전 글\u003C\u002Fa\u003E\u003C\u002Fu\u003E에 이어서 이 글에서는 숨고에서 모바일 앱을 일반 사용자와 내부 테스터에게 배포하는 방법에 대해 소개합니다.\u003C\u002Fp\u003E\n\u003Ch1 id=\"qa를-거쳐-배포하기\"\u003E\u003Ca href=\"#qa%EB%A5%BC-%EA%B1%B0%EC%B3%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EQA를 거쳐 배포하기\u003C\u002Fh1\u003E\n\u003Cp\u003E숨고에서 개발자가 작업한 코드는 두 번의 QA를 통과한 뒤에 배포되고 있습니다. 첫 번째는 스쿼드 내부 QA, 두 번째는 통합 QA 입니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EMS 앱센터\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EQA를 진행하기 위해서는 내부 테스터들에게 최신 버전의 앱을 배포해야 합니다. 이를 위한 플랫폼으로는 MS 앱센터를 사용하고 있습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*2ip-wQxJDzx4sVwSnITo-g.png\"\u003E\n\u003Cem\u003EMS 앱센터를 통해 내부 테스터에게 앱 전달\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E스쿼드 내부 QA\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E각 스쿼드에서 작업한 코드는 통합 QA를 받기 전에 스쿼드 내부 QA를 진행합니다. 이 단계에서는 스쿼드 구성원(개발자, 디자이너, PO 등)들이 함께 스쿼드 내에서 진행한 일감이 정상적으로 동작하는지를 확인합니다. 개발자는 앱센터를 통해 스쿼드원들에게 테스트할 버전의 앱을 전달하고, 수정이 필요할 경우 새 버전을 다시 전달하게 됩니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*dP-8fu-s3kl5i58yuN2TAA.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E스쿼드 A에서 내부 QA를 하는 과정. 버전 identifier의 ‘a’는 스쿼드 이름입니다\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E통합 QA\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E스쿼드 내부 QA가 완료된 코드들은 하나로 병합된 뒤 통합 QA를 진행합니다. 이 단계에서는 QA 챕터에서 코드들을 병합한 뒤에도 사이드 이펙트 없이 각 스쿼드의 작업이 잘 동작 하는지 확인하고, 숨고 서비스의 중요한 기능들이 잘 동작 하는지를 확인합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*nu0rwkU2vS_PRejkm1b4YA.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E통합 QA를 하는 과정\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E일반 사용자에게 배포\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E통합 QA가 완료되면 배포 준비가 완료된 것으로, 마켓을 통해 일반 사용자에게 배포하게 됩니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*Yjj_-pndKmLWjsXzXeVCOQ.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E마켓을 통해 일반 사용자에게 앱 전달\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Ch1 id=\"쉽게-배포하기\"\u003E\u003Ca href=\"#%EC%89%BD%EA%B2%8C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E쉽게 배포하기\u003C\u002Fh1\u003E\n\u003Cp\u003E내부 테스터와 일반 사용자에게 새 버전의 빌드를 배포할 때마다 어딘가에서는 다음 작업들을 진행해야 합니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*f-c-wIjP2arI4rnm1hxZnw.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E숨고에서는 리액트 네이티브를 사용하기때문에 한번에 두가지 앱을 배포하게 됩니다\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E개발자가 직접 이 작업들을 하려면 적게 잡아도 3~40분은 필요할 텐데요, 외부에서 자동으로 수행하게 하면 개발자의 능률을 높이고 잦은 배포도 쉽게 할 수 있습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E그래서 우리는 이런 것들로 자동화를 하고 있습니다:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cstrong\u003E버전 변경 스크립트:\u003C\u002Fstrong\u003E 버전을 수정하고, git 태그를 생성하는 스크립트 사용\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003ECircleCI:\u003C\u002Fstrong\u003E 클라우드에서 빌드와 배포를 수행\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1 id=\"버전-변경-스크립트\"\u003E\u003Ca href=\"#%EB%B2%84%EC%A0%84-%EB%B3%80%EA%B2%BD-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E버전 변경 스크립트\u003C\u002Fh1\u003E\n\u003Cp\u003E스크립트로 이런 반복 작업을 처리합니다:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EAndroid, iOS 설정 파일, package.json의 버전 이름과 버전 코드를 현재 브랜치와 버전을 기준으로 규칙에 따라 동일하게 수정하기\u003C\u002Fli\u003E\n\u003Cli\u003E새 버전으로 git 태그 생성하기\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E스크립트는 package.json에 선언되어있고 이렇게 호출하면 버전 변경이 완료됩니다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-zsh\"\u003E\u003Ccode class=\"language-zsh\"\u003Enpm run version:bump\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAndroid, iOS 설정 파일은 스크립트 내부에서 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fstovmascript\u002Freact-native-version\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ereact-native-version\u003C\u002Fa\u003E을 이용해서 package 버전을 따라 수정하도록 되어있습니다.\u003C\u002Fp\u003E\n\u003Cp\u003E버전을 변경한 뒤 리모트로 푸시하면 CircleCI에서 배포가 시작됩니다.\u003C\u002Fp\u003E\n\u003Ch1 id=\"circleci\"\u003E\u003Ca href=\"#circleci\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECircleCI\u003C\u002Fh1\u003E\n\u003Cp\u003E클라우드에서 자동으로 빌드와 배포를 하기 위해 CircleCI를 사용하고 있고 워크플로우는 두 가지가 설정되어있습니다:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cstrong\u003Epre-release 워크플로우:\u003C\u002Fstrong\u003E 테스트용 빌드를 수행하고 앱센터에 배포\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003Erelease 워크플로우:\u003C\u002Fstrong\u003E 마켓용 빌드를 수행하고 마켓에 배포\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E워크플로우는 git 태그가 리모트에 푸시되면 시작됩니다. 태그가 release 버전(SEMVER 규칙상)이면 release 워크플로우가, pre-release 버전이면 pre-release 워크플로우가 시작됩니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003Epre-release 워크플로우\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Epre-release 워크플로우가 시작되면 CircleCI에서 앱센터 코드 푸시를 통해 배포를 시작함과 동시에 슬랙을 통해 개발자에게 네이티브 앱으로도 배포 할지 물어봅니다. 개발자가 승인할 경우 코드 푸시, 네이티브 앱 모두 배포됩니다. 배포 대상은 내부 테스터입니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*FJLSjRo5FikTcrg8xXkrtA.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E흐름\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*mqKbO0xJuJFcDnoAobHMJQ.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E발송되는 슬랙 메세지\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*BcLZLBDY2ft_I5wcSMfIpQ.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003ECircleCI 웹 인터페이스에서는 이런 모습입니다\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003Erelease 워크플로우\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Erelease 워크플로우가 시작되면 CircleCI에서 슬랙을 통해 개발자에게 배포할 플랫폼을 물어봅니다. 플랫폼을 선택하면 일반 사용자에게 배포가 이루어집니다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*frhoF2x9dLVA3eZQsVBIag.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E흐름\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*1D3uYODP32f9I8uPY_tB-w.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003E발송되는 슬랙 메세지\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F700\u002F1*rWozYKtfkQXoriY-MptGEA.png\"\u003E\u003Cbr\u003E\n\u003Cem\u003ECircleCI 웹 인터페이스에서는 이런 모습입니다\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E이렇게 숨고에서는 배포 과정을 자동화 함으로써 이런 경험을 할 수 있었습니다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E개발자들이 배포를 신경 쓰지 않고 개발에 집중\u003C\u002Fli\u003E\n\u003Cli\u003E새로 합류한 개발자도 쉽게 배포\u003C\u002Fli\u003E\n\u003Cli\u003E배포에 필요한 반복 작업들을 쉽고 일관되게 처리\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","tags":[{"id":"Development"},{"id":"Mobile"},{"id":"CI\u002FCD"}],"author":{"path":"\u002Fauthor\u002Fjimmy-lee\u002F","title":"Jimmy Lee","image":"uploads\u002Fauthor-images\u002Fjimmy.png","blurb":"Soomgo Mobile Engineer"}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.fa1010ad.js" defer></script><script src="/assets/js/page--src--templates--post-vue.77e0a7ac.js" defer></script>
  </body>
</html>
